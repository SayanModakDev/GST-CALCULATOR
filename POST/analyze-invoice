@app.route('/analyze-invoice', methods=['POST'])
def analyze_invoice():
    file = request.files['invoice']
    img = cv2.imdecode(np.frombuffer(file.read(), np.uint8), cv2.IMREAD_COLOR)

    # Preprocess image
    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
    cleaned = cv2.threshold(gray, 150, 255, cv2.THRESH_BINARY)[1]

    # OCR
    text = pytesseract.image_to_string(cleaned)

    # Extract values
    result = extract_invoice_data(text)
    return jsonify(result)  # {name, price, gst_breakdown}
